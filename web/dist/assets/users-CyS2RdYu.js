import{A as i,r as u,K as f,L as v,M as d,N as h}from"./index-_QPn6ggU.js";const w=i("users",()=>{const l=u([]),t=u(!1),r=u(null);return{users:l,loading:t,error:r,fetchUsers:async()=>{t.value=!0,r.value=null;try{const{data:s,error:e}=await f();if(e)throw e;l.value=s||[]}catch(s){r.value=s.message||"Failed to fetch users",console.error("Error fetching users:",s)}finally{t.value=!1}},addUser:async s=>{t.value=!0,r.value=null;try{const{data:e,error:a}=await v(s);if(a)throw a;return e&&l.value.unshift(e),{success:!0}}catch(e){return r.value=e.message||"Failed to create user",console.error("Error creating user:",e),{success:!1,error:r.value}}finally{t.value=!1}},updateUser:async(s,e)=>{t.value=!0,r.value=null;try{const{data:a,error:o}=await d(s,e);if(o)throw o;if(a){const c=l.value.findIndex(n=>n.id===s);c!==-1&&(l.value[c]=a)}return{success:!0}}catch(a){return r.value=a.message||"Failed to update user",console.error("Error updating user:",a),{success:!1,error:r.value}}finally{t.value=!1}},removeUser:async s=>{t.value=!0,r.value=null;try{const{error:e}=await h(s);if(e)throw e;return l.value=l.value.filter(a=>a.id!==s),{success:!0}}catch(e){return r.value=e.message||"Failed to delete user",console.error("Error deleting user:",e),{success:!1,error:r.value}}finally{t.value=!1}}}});export{w as u};
